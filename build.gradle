group 'com.joantolos.kata.social.network'

apply plugin: 'java'

dependencies {
    compile group: 'org.apache.commons', name: 'commons-io', version: '1.3.2'
}

allprojects {
    version '1.0'
    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    apply plugin: 'java'
    apply plugin: 'jacoco'

    repositories {
        jcenter()
    }

    jacoco {
        toolVersion = "0.7.6+"
        reportsDir = file("${project.buildDir}/jacoco/reports")
    }

    jacocoTestReport {
        reports {
            xml.enabled true
            html.enabled true
            csv.enabled false
            html.destination "${project.buildDir}/jacoco/reports/coverage/html"
        }
    }

    dependencies {
        testCompile group: 'junit', name: 'junit', version: '4.11'
        testCompile "org.spockframework:spock-core:1.1-groovy-2.4-rc-2"
    }

    task fatJar(type: Jar) {
        manifest { attributes'Main-Class': 'com.joantolos.kata.social.networking.TwitterApp' }
        baseName = project.name + '-all'
        from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
        with jar
    }
}